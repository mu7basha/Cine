{
  "id": "io.github.diegopvlk.Cine",
  "runtime": "org.gnome.Platform",
  "runtime-version": "49",
  "sdk": "org.gnome.Sdk",
  "command": "cine",
  "finish-args": [
    "--share=ipc",
    "--socket=fallback-x11",
    "--device=dri",
    "--socket=wayland",
    "--socket=pulseaudio",
    "--filesystem=xdg-pictures/Cine Screenshots:create",
    "--filesystem=xdg-run/pipewire-0:ro",
    "--filesystem=xdg-run/gvfs",
    "--filesystem=xdg-run/gvfsd",
    "--talk-name=org.gtk.vfs.*",
    "--env=LC_NUMERIC=C"
  ],
  "cleanup": [
    "/include",
    "/lib/pkgconfig",
    "/man",
    "/share/doc",
    "/share/gtk-doc",
    "/share/man",
    "/share/pkgconfig",
    "*.la",
    "*.a",
    "/lib/cmake"
  ],
  "modules": [
    {
      "name": "libmpv",
      "cleanup": [
        "/share/applications",
        "/share/bash-completion",
        "/share/doc",
        "/share/icons",
        "/share/zsh"
      ],
      "buildsystem": "meson",
      "config-opts": [
        "-Dlibmpv=true",
        "-Dbuild-date=false",
        "-Dalsa=disabled",
        "-Dlua=enabled"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/mpv-player/mpv/archive/v0.41.0.tar.gz",
          "sha256": "ee21092a5ee427353392360929dc64645c54479aefdb5babc5cfbb5fad626209",
          "x-checker-data": {
            "type": "anitya",
            "project-id": 5348,
            "stable-only": true,
            "url-template": "https://github.com/mpv-player/mpv/archive/v$version.tar.gz",
            "is-important": true
          }
        }
      ],
      "modules": [
        "shared-modules/lua5.1/lua-5.1.5.json",
        {
          "name": "libass",
          "config-opts": [
            "--disable-static"
          ],
          "sources": [
            {
              "type": "archive",
              "url": "https://github.com/libass/libass/releases/download/0.17.4/libass-0.17.4.tar.xz",
              "sha256": "78f1179b838d025e9c26e8fef33f8092f65611444ffa1bfc0cfac6a33511a05a",
              "x-checker-data": {
                "type": "anitya",
                "project-id": 1560,
                "stable-only": true,
                "url-template": "https://github.com/libass/libass/releases/download/$version/libass-$version.tar.xz"
              }
            }
          ]
        },
        {
          "name": "uchardet",
          "buildsystem": "cmake-ninja",
          "config-opts": [
            "-DCMAKE_BUILD_TYPE=Release",
            "-DBUILD_STATIC=0",
            "-DCMAKE_POLICY_VERSION_MINIMUM=3.5"
          ],
          "cleanup": [
            "/bin"
          ],
          "sources": [
            {
              "type": "archive",
              "url": "https://www.freedesktop.org/software/uchardet/releases/uchardet-0.0.8.tar.xz",
              "sha256": "e97a60cfc00a1c147a674b097bb1422abd9fa78a2d9ce3f3fdcc2e78a34ac5f0",
              "x-checker-data": {
                "type": "anitya",
                "project-id": 9265,
                "stable-only": true,
                "url-template": "https://www.freedesktop.org/software/uchardet/releases/uchardet-$version.tar.xz"
              }
            }
          ]
        },
        {
          "name": "libplacebo",
          "buildsystem": "meson",
          "sources": [
            {
              "type": "git",
              "url": "https://github.com/haasn/libplacebo.git",
              "commit": "3188549fba13bbdf3a5a98de2a38c2e71f04e21e",
              "tag": "v7.351.0",
              "x-checker-data": {
                "type": "git",
                "tag-pattern": "^v([\\d.]+)$"
              }
            },
            {
              "type": "patch",
              "path": "libplacebo-vulkan-python-xml.patch"
            }
          ]
        }
      ]
    },
    {
      "name": "python-mpv",
      "buildsystem": "simple",
      "build-commands": [
        "pip3 install --no-index --no-build-isolation --find-links=. --prefix=/app python_mpv"
      ],
      "sources": [
        {
          "type": "file",
          "url": "https://files.pythonhosted.org/packages/77/bc/6aa34c8805ff62e2fefc7d171563c60598aac215d5241186031a2c839935/python_mpv-1.0.8.tar.gz",
          "sha256": "017fa359da059c831a94c419083491903e6d2f7c81b9841c33c196cabf4b3fe3"
        }
      ]
    },
    {
      "name": "cine",
      "builddir": true,
      "buildsystem": "meson",
      "sources": [
        {
          "type": "dir",
          "path": ".."
        }
      ]
    }
  ]
}